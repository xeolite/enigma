<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="x-enigma : Fully configurable Enigma code machine, written in Java 8">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>x-enigma</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/xeolite/x-enigma">View on GitHub</a>

          <h1 id="project_title">x-enigma</h1>
          <h2 id="project_tagline">Fully configurable Enigma code machine, written in Java 8</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/xeolite/x-enigma/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/xeolite/x-enigma/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <ul>
<li>M3 and M4 military variants implemented</li>
<li>Support for all machine settings</li>
<li>Support for creating custom rotors, reflectors and machines</li>
<li>Formatted output</li>
</ul>

<h4>
<a id="configuration" class="anchor" href="#configuration" aria-hidden="true"><span class="octicon octicon-link"></span></a>Configuration</h4>

<p>As an example we'll use the following codebook entry for the M3 machine:</p>

<pre><code>------------------------------------------------------------------------------
| Tag | UKW |   Walzenlage    | Ringstellung |      Steckerverbindungen      |
------------------------------------------------------------------------------
| 31  |  C  | VII   III  I    |   26 04 11   | BN DF EL HV JQ KW MZ PR SX UY |
</code></pre>

<p>This tells us for the 31st day of the month, the settings are:</p>

<ul>
<li>Reflector C</li>
<li>Rotors VII, III, I</li>
<li>Ring settings 26 (Z), 4 (D), 11 (K)</li>
<li>Plugboard connection pairs B=N, D=F etc.</li>
</ul>

<p>The 'ring settings' are an offset of each rotor's wiring in relation to the rest of the rotor body
and we can set them by number (they begin at 1) or letter (setting 1 is A).</p>

<p>The operators could then choose their own start positions for the rotors, so
let's choose a start position for the three rotors with X, E and O facing upward in the machine.
The machine is then put together like this:</p>

<div class="highlight highlight-java"><pre>    <span class="pl-smi">Enigma</span> enigma <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">EnigmaM3</span>(
            <span class="pl-smi">StandardReflector</span><span class="pl-k">.</span><span class="pl-smi">C</span>,
            <span class="pl-smi">StandardRotor</span><span class="pl-c1"><span class="pl-k">.</span>VII</span><span class="pl-k">.</span>withSetting(<span class="pl-c1">26</span>)<span class="pl-k">.</span>startAt(<span class="pl-smi">Letter</span><span class="pl-k">.</span><span class="pl-smi">X</span>),
            <span class="pl-smi">StandardRotor</span><span class="pl-c1"><span class="pl-k">.</span>III</span><span class="pl-k">.</span>withSetting(<span class="pl-c1">4</span>)<span class="pl-k">.</span>startAt(<span class="pl-smi">E</span>),
            <span class="pl-smi">StandardRotor</span><span class="pl-k">.</span><span class="pl-smi">I</span><span class="pl-k">.</span>withSetting(<span class="pl-c1">11</span>)<span class="pl-k">.</span>startAt(<span class="pl-smi">O</span>),
            <span class="pl-k">new</span> <span class="pl-smi">Plugboard</span>()
                    .connect(<span class="pl-smi">B</span>, <span class="pl-smi">N</span>)<span class="pl-k">.</span>connect(<span class="pl-smi">D</span>, <span class="pl-smi">F</span>)<span class="pl-k">.</span>connect(<span class="pl-smi">E</span>, <span class="pl-smi">L</span>)
                    .connect(<span class="pl-smi">H</span>, <span class="pl-smi">V</span>)<span class="pl-k">.</span>connect(<span class="pl-smi">J</span>, <span class="pl-smi">Q</span>)<span class="pl-k">.</span>connect(<span class="pl-smi">K</span>, <span class="pl-smi">W</span>)
                    .connect(<span class="pl-smi">M</span>, <span class="pl-smi">Z</span>)<span class="pl-k">.</span>connect(<span class="pl-smi">P</span>, <span class="pl-smi">R</span>)<span class="pl-k">.</span>connect(<span class="pl-smi">S</span>, <span class="pl-smi">X</span>)
                    .connect(<span class="pl-smi">U</span>, <span class="pl-smi">Y</span>));</pre></div>

<h4>
<a id="encryption--decryption" class="anchor" href="#encryption--decryption" aria-hidden="true"><span class="octicon octicon-link"></span></a>Encryption / decryption</h4>

<p>Now we're ready to encrypt a message. The encryption is case-insensitive and any non-alphabetic characters are ignored
as Enigma only supports the characters A-Z.</p>

<div class="highlight highlight-java"><pre>enigma<span class="pl-k">.</span>encipher(
        <span class="pl-s"><span class="pl-pds">"</span>If you want to keep a secret, you must also hide it from yourself.<span class="pl-pds">"</span></span>,
        <span class="pl-smi">OutputStyle</span><span class="pl-k">.</span>groupsOf(<span class="pl-c1">5</span>)<span class="pl-k">.</span>groupsPerLine(<span class="pl-c1">4</span>));</pre></div>

<p>Which gives us</p>

<pre><code>MQQWF AYPYF FYXWZ TJFIW
USLMX JHMDC FULVX TVBCG
UTAXE AJPLU D
</code></pre>

<p>Decrypting the message requires it to be input to a machine in exactly the same starting state as the machine that encrypted it and then</p>

<div class="highlight highlight-java"><pre>enigma<span class="pl-k">.</span>encipher(<span class="pl-s"><span class="pl-pds">"</span>MQQWF AYPYF FYXWZ TJFIW USLMX JHMDC FULVX TVBCG UTAXE AJPLU D<span class="pl-pds">"</span></span>);</pre></div>

<p>gives us the alphabetic content of the original message</p>

<pre><code>IFYOUWANTTOKEEPASECRETYOUMUSTALSOHIDEITFROMYOURSELF
</code></pre>

<p>The M4 variant added a thin fourth rotor to the machine by combining this with a special thin reflector, so that it is configured like this:</p>

<div class="highlight highlight-java"><pre>    <span class="pl-smi">Enigma</span> enigma <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">EnigmaM4</span>(
            <span class="pl-smi">ThinReflector</span><span class="pl-c1"><span class="pl-k">.</span>B_THIN</span>,
            <span class="pl-smi">ThinRotor</span><span class="pl-c1"><span class="pl-k">.</span>GAMMA</span><span class="pl-k">.</span>withSetting(<span class="pl-smi">Letter</span><span class="pl-k">.</span><span class="pl-smi">X</span>)<span class="pl-k">.</span>startAt(<span class="pl-smi">Letter</span><span class="pl-k">.</span><span class="pl-smi">S</span>),
            <span class="pl-smi">StandardRotor</span><span class="pl-k">.</span><span class="pl-smi">I</span><span class="pl-k">.</span>withSetting(<span class="pl-smi">M</span>)<span class="pl-k">.</span>startAt(<span class="pl-smi">P</span>),
            <span class="pl-smi">StandardRotor</span><span class="pl-c1"><span class="pl-k">.</span>II</span><span class="pl-k">.</span>withSetting(<span class="pl-smi">J</span>)<span class="pl-k">.</span>startAt(<span class="pl-smi">D</span>),
            <span class="pl-smi">StandardRotor</span><span class="pl-c1"><span class="pl-k">.</span>III</span><span class="pl-k">.</span>withSetting(<span class="pl-smi">H</span>)<span class="pl-k">.</span>startAt(<span class="pl-smi">T</span>),
            <span class="pl-k">new</span> <span class="pl-smi">Plugboard</span>()
                    .connect(<span class="pl-smi">A</span>, <span class="pl-smi">U</span>)<span class="pl-k">.</span>connect(<span class="pl-smi">F</span>, <span class="pl-smi">O</span>)<span class="pl-k">.</span>connect(<span class="pl-smi">K</span>, <span class="pl-smi">R</span>)
                    .connect(<span class="pl-smi">I</span>, <span class="pl-smi">S</span>)<span class="pl-k">.</span>connect(<span class="pl-smi">D</span>, <span class="pl-smi">P</span>)<span class="pl-k">.</span>connect(<span class="pl-smi">X</span>, <span class="pl-smi">W</span>));</pre></div>

<p>Encryption and decryption are performed in the same way as for the M3.</p>

<h4>
<a id="custom-components" class="anchor" href="#custom-components" aria-hidden="true"><span class="octicon octicon-link"></span></a>Custom components</h4>

<p>Custom rotors and reflectors can be created. The cipher used by these components can be represented by a string of 26 letters,
such that its first letter is the result of enciphering A, the second of enciphering B, etc., as commonly used in Enigma
descriptions.</p>

<p>Reflectors can be created in this way:</p>

<div class="highlight highlight-java"><pre><span class="pl-smi">StandardReflector</span> <span class="pl-smi">A</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">StandardReflector</span>(<span class="pl-s"><span class="pl-pds">"</span>EJMZALYXVBWFCRQUONTSPIKHGD<span class="pl-pds">"</span></span>);</pre></div>

<p>Rotors are most easily defined by creating a reusable RotorConfiguration with the cipher alphabet and the turnover positions:</p>

<div class="highlight highlight-java"><pre><span class="pl-k">RotorConfiguration&lt;<span class="pl-smi">StandardRotor</span>&gt;</span> <span class="pl-c1">X1</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-k">RotorConfiguration&lt;&gt;</span>(
        <span class="pl-smi">StandardRotor</span><span class="pl-k">::</span><span class="pl-k">new</span>,
        "MIBPUYDQTXKWRFSCJAZEVHNOLG",
        Letter.M, Letter.B);

<span class="pl-smi">StandardRotor</span> left <span class="pl-k">=</span> <span class="pl-c1">X1</span><span class="pl-k">.</span>withSetting(<span class="pl-smi">Letter</span><span class="pl-k">.</span><span class="pl-smi">D</span>)<span class="pl-k">.</span>startAt(<span class="pl-smi">Letter</span><span class="pl-k">.</span><span class="pl-smi">R</span>);</pre></div>

<p>Custom machines can also be created, based on the mechanism of the military Enigma. Here's a two-rotor variant with no plugboard:</p>

<div class="highlight highlight-java"><pre>    <span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">SmallEnigma</span> <span class="pl-k">extends</span> <span class="pl-e">Enigma</span> {

        <span class="pl-k">public</span> <span class="pl-en">SmallEnigma</span>(<span class="pl-smi">StandardReflector</span> <span class="pl-v">reflector</span>,
                            <span class="pl-smi">StandardRotor</span> <span class="pl-v">left</span>,
                            <span class="pl-smi">StandardRotor</span> <span class="pl-v">right</span>) {

            <span class="pl-v">super</span>(<span class="pl-k">new</span> <span class="pl-smi">EnigmaMechanism</span>(reflector, <span class="pl-k">new</span> <span class="pl-smi">RotorGroup</span>(left, right),
                    <span class="pl-k">new</span> <span class="pl-smi">LeverGroup</span>(<span class="pl-c1">2</span>), <span class="pl-smi">Stator</span><span class="pl-c1"><span class="pl-k">.</span>MILITARY</span>, <span class="pl-k">new</span> <span class="pl-smi">Plugboard</span>()));
        }

    }</pre></div>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">x-enigma maintained by <a href="https://github.com/xeolite">xeolite</a></p>
        <p>Published with <a href="https://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
